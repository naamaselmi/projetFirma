<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="edu.connexion3A7.controllers.ForumFrontController"
            prefHeight="700.0" prefWidth="1100.0"
            stylesheets="@forum.css"
            styleClass="app-root">

    <!-- SIDEBAR -->
    <left>
        <VBox spacing="10" prefWidth="220" styleClass="sidebar">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>

            <!-- LOGO -->
            <ImageView fitHeight="120" preserveRatio="true">
                <image>
                    <Image url="@images/logo.png"/>
                </image>
            </ImageView>

            <Button text="Accueil" styleClass="side-btn"/>
            <Button text="Evènement" styleClass="side-btn"/>
            <Button text="Marketplace" styleClass="side-btn"/>
            <Button text="Forum" styleClass="side-btn "/>
            <Button text="Technicien" styleClass="side-btn"/>

            <Region VBox.vgrow="ALWAYS"/>

            <Button text="Se Déconnecter" styleClass="side-btn"/>
        </VBox>
    </left>

    <!-- MAIN CONTENT -->
    <center>
        <VBox spacing="15" styleClass="content">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>

            <!-- HEADER -->
            <HBox spacing="12" alignment="CENTER_LEFT" styleClass="topbar">
                <Label text="Forum" styleClass="page-title"/>

                <Region HBox.hgrow="ALWAYS"/>

                <TextField fx:id="tfSearch" promptText="Recherche..." onKeyReleased="#onSearch" styleClass="search"/>
                <Button text="Filtrer" onAction="#onSearch" styleClass="btn btn-secondary"/>
            </HBox>

            <VBox styleClass="panel">
                <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="tabs">

                    <!-- TAB LISTE -->
                    <Tab text="Liste">
                        <VBox spacing="10" styleClass="tab-inner">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>

                            <ListView fx:id="lvPosts" VBox.vgrow="ALWAYS" styleClass="post-list"/>
                        </VBox>
                    </Tab>

                    <!-- TAB CREER -->
                    <Tab text="Créer">
                        <VBox spacing="12" styleClass="tab-inner">
                            <padding>
                                <Insets top="15" right="15" bottom="15" left="15"/>
                            </padding>

                            <Label text="Créer un post" styleClass="section-title"/>

                            <TextField fx:id="tfTitre" promptText="Titre" styleClass="field"/>
                            <HBox spacing="10">
                                <ComboBox fx:id="cbCategorie" promptText="Catégorie" styleClass="field" prefWidth="250"/>
                                <ComboBox fx:id="cbSousCategorie" promptText="Sous-catégorie" styleClass="field" prefWidth="250" disable="true"/>
                            </HBox>
                            <!-- Status handled automatically -->
                            <TextArea fx:id="taContenu" promptText="Contenu" prefRowCount="6" wrapText="true"
                                      styleClass="field area"/>

                            <HBox alignment="CENTER_RIGHT" spacing="10">
                                <Button text="Annuler" onAction="#onCancel" styleClass="btn btn-secondary"/>
                                <Button text="Publier" onAction="#onAdd" styleClass="btn btn-primary"/>
                            </HBox>

                        </VBox>
                    </Tab>

                </TabPane>
            </VBox>

        </VBox>
    </center>

</BorderPane>
