<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<VBox fx:id="cartPanel" prefWidth="350.0" style="-fx-background-color: white; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 15, 0, -3, 0);" 
      xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="marketplace.GUI.Controller.CartPanelController">
   
   <!-- Header -->
   <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: #49ad32; -fx-padding: 15;">
      <children>
         <SVGPath content="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" 
                fill="white" scaleX="1.3" scaleY="1.3" />
         <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;" text="Mon Panier" />
         <HBox HBox.hgrow="ALWAYS" />
         <Button fx:id="closeButton" onAction="#handleClose" style="-fx-background-color: transparent; -fx-cursor: hand;">
            <graphic>
               <SVGPath content="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="white" scaleX="1.2" scaleY="1.2" />
            </graphic>
         </Button>
      </children>
   </HBox>
   
   <!-- Cart Items Count -->
   <HBox alignment="CENTER" style="-fx-background-color: #f0f9ed; -fx-padding: 10;">
      <children>
         <Label fx:id="itemCountLabel" style="-fx-font-size: 14px; -fx-text-fill: #49ad32;" text="0 article(s) dans le panier" />
      </children>
   </HBox>
   
   <!-- Cart Items List -->
   <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-background: transparent;">
      <content>
         <VBox fx:id="cartItemsContainer" spacing="10.0" style="-fx-padding: 15;">
            <!-- Cart items will be added here dynamically -->
            <Label fx:id="emptyCartLabel" alignment="CENTER" 
                   style="-fx-font-size: 14px; -fx-text-fill: #888; -fx-padding: 30 0;" 
                   text="Votre panier est vide" wrapText="true" />
         </VBox>
      </content>
   </ScrollPane>
   
   <Separator />
   
   <!-- Totals Section -->
   <VBox spacing="8.0" style="-fx-padding: 15; -fx-background-color: #fefbde;">
      <children>
         <!-- Subtotal -->
         <HBox alignment="CENTER_LEFT">
            <children>
               <Label style="-fx-font-size: 14px; -fx-text-fill: #555;" text="Sous-total:" />
               <HBox HBox.hgrow="ALWAYS" />
               <Label fx:id="subtotalLabel" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;" text="0.00 DT" />
            </children>
         </HBox>
         
         <!-- Cautions (for rentals) -->
         <HBox fx:id="cautionsRow" alignment="CENTER_LEFT" managed="false" visible="false">
            <children>
               <Label style="-fx-font-size: 14px; -fx-text-fill: #555;" text="Cautions:" />
               <HBox HBox.hgrow="ALWAYS" />
               <Label fx:id="cautionsLabel" style="-fx-font-size: 14px; -fx-text-fill: #e67e22;" text="0.00 DT" />
            </children>
         </HBox>
         
         <Separator />
         
         <!-- Grand Total -->
         <HBox alignment="CENTER_LEFT">
            <children>
               <Label style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333;" text="Total:" />
               <HBox HBox.hgrow="ALWAYS" />
               <Label fx:id="totalLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #49ad32;" text="0.00 DT" />
            </children>
         </HBox>
      </children>
   </VBox>
   
   <!-- Action Buttons -->
   <VBox spacing="10.0" style="-fx-padding: 15;">
      <children>
         <Button fx:id="payButton" maxWidth="Infinity" onAction="#handlePay" 
                 prefHeight="45.0" 
                 style="-fx-background-color: #49ad32; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 8; -fx-cursor: hand;"
                 text="ProcÃ©der au paiement">
            <graphic>
               <SVGPath content="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" fill="white" scaleX="1.0" scaleY="1.0" />
            </graphic>
         </Button>
         
         <Button fx:id="clearButton" maxWidth="Infinity" onAction="#handleClearCart" 
                 prefHeight="35.0"
                 style="-fx-background-color: transparent; -fx-text-fill: #e74c3c; -fx-font-size: 13px; -fx-border-color: #e74c3c; -fx-border-radius: 8; -fx-background-radius: 8; -fx-cursor: hand;"
                 text="Vider le panier" />
      </children>
   </VBox>
</VBox>
