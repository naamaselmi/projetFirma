<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<VBox spacing="20" style="-fx-background-color: #fefbde;" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="marketplace.GUI.Controller.LocationAdminController">
   <padding>
      <Insets bottom="20" left="20" right="20" top="20" />
   </padding>
   
   <!-- Header -->
   <HBox alignment="CENTER_LEFT" spacing="15">
      <children>
         <SVGPath content="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z" fill="#e67e22" scaleX="1.5" scaleY="1.5" />
         <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #333;" text="Gestion des Locations" />
      </children>
   </HBox>
   
   <!-- Filters Row -->
   <HBox alignment="CENTER_LEFT" spacing="15">
      <children>
         <!-- Search -->
         <TextField fx:id="searchField" prefWidth="250" promptText="Rechercher par numéro ou utilisateur..." style="-fx-background-radius: 5;" />
         
         <!-- Type Filter -->
         <ComboBox fx:id="typeFilterCombo" prefWidth="150" promptText="Type" style="-fx-background-radius: 5;" />
         
         <!-- Status Filter -->
         <ComboBox fx:id="statusFilterCombo" prefWidth="150" promptText="Statut" style="-fx-background-radius: 5;" />
         
         <!-- Refresh Button -->
         <Button onAction="#handleRefresh" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 5; -fx-cursor: hand;" text="Actualiser">
            <graphic>
               <SVGPath content="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="white" scaleX="0.8" scaleY="0.8" />
            </graphic>
         </Button>
         
         <HBox HBox.hgrow="ALWAYS" />
         
         <!-- Stats Labels -->
         <Label fx:id="totalCountLabel" style="-fx-font-size: 14px; -fx-text-fill: #666;" text="Total: 0" />
         <Label fx:id="activeCountLabel" style="-fx-font-size: 14px; -fx-text-fill: #27ae60; -fx-font-weight: bold;" text="En cours: 0" />
         <Label fx:id="pendingCountLabel" style="-fx-font-size: 14px; -fx-text-fill: #f39c12; -fx-font-weight: bold;" text="En attente: 0" />
      </children>
   </HBox>
   
   <!-- Table -->
   <TableView fx:id="locationTable" VBox.vgrow="ALWAYS" style="-fx-background-radius: 8;">
      <columns>
         <TableColumn fx:id="colId" prefWidth="60" text="ID" />
         <TableColumn fx:id="colNumero" prefWidth="120" text="Numéro" />
         <TableColumn fx:id="colType" prefWidth="100" text="Type" />
         <TableColumn fx:id="colElement" prefWidth="180" text="Élément" />
         <TableColumn fx:id="colUtilisateur" prefWidth="140" text="Utilisateur" />
         <TableColumn fx:id="colDateDebut" prefWidth="100" text="Date Début" />
         <TableColumn fx:id="colDateFin" prefWidth="100" text="Date Fin" />
         <TableColumn fx:id="colDuree" prefWidth="70" text="Durée" />
         <TableColumn fx:id="colPrix" prefWidth="100" text="Prix Total" />
         <TableColumn fx:id="colCaution" prefWidth="90" text="Caution" />
         <TableColumn fx:id="colStatut" prefWidth="100" text="Statut" />
         <TableColumn fx:id="colActions" prefWidth="120" text="Actions" />
      </columns>
   </TableView>
   
   <!-- Bottom Actions -->
   <HBox alignment="CENTER_RIGHT" spacing="10">
      <children>
         <Button onAction="#handleExport" style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-background-radius: 5; -fx-cursor: hand;" text="Exporter CSV">
            <graphic>
               <SVGPath content="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" fill="white" scaleX="0.8" scaleY="0.8" />
            </graphic>
         </Button>
      </children>
   </HBox>
</VBox>
