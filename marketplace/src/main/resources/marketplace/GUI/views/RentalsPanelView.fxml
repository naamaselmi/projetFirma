<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<VBox fx:id="rentalsPanel" prefWidth="380.0" style="-fx-background-color: white; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 15, 0, -3, 0);" 
      xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="marketplace.GUI.Controller.RentalsPanelController">
   
   <!-- Header -->
   <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: #e67e22; -fx-padding: 15;">
      <children>
         <SVGPath content="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" 
                fill="white" scaleX="1.3" scaleY="1.3" />
         <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: white;" text="Mes Locations" />
         <HBox HBox.hgrow="ALWAYS" />
         <Button fx:id="closeButton" onAction="#handleClose" style="-fx-background-color: transparent; -fx-cursor: hand;">
            <graphic>
               <SVGPath content="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="white" scaleX="1.2" scaleY="1.2" />
            </graphic>
         </Button>
      </children>
   </HBox>
   
   <!-- Rentals Count -->
   <HBox alignment="CENTER" style="-fx-background-color: #fef5e7; -fx-padding: 10;">
      <children>
         <Label fx:id="rentalCountLabel" style="-fx-font-size: 14px; -fx-text-fill: #e67e22;" text="0 location(s)" />
      </children>
   </HBox>
   
   <!-- Rentals List -->
   <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-background: transparent;">
      <content>
         <VBox fx:id="rentalsContainer" spacing="10.0" style="-fx-padding: 15;">
            <!-- Rental items will be added here dynamically -->
            <Label fx:id="emptyLabel" alignment="CENTER" 
                   style="-fx-font-size: 14px; -fx-text-fill: #888; -fx-padding: 30 0;" 
                   text="Vous n'avez aucune location" wrapText="true" />
         </VBox>
      </content>
   </ScrollPane>
   
   <Separator />
   
   <!-- Summary Section -->
   <VBox spacing="8.0" style="-fx-padding: 15; -fx-background-color: #fefbde;">
      <children>
         <!-- Active Rentals -->
         <HBox alignment="CENTER_LEFT">
            <children>
               <Label style="-fx-font-size: 14px; -fx-text-fill: #555;" text="Locations actives:" />
               <HBox HBox.hgrow="ALWAYS" />
               <Label fx:id="activeCountLabel" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #27ae60;" text="0" />
            </children>
         </HBox>
         
         <!-- Pending Rentals -->
         <HBox alignment="CENTER_LEFT">
            <children>
               <Label style="-fx-font-size: 14px; -fx-text-fill: #555;" text="En attente:" />
               <HBox HBox.hgrow="ALWAYS" />
               <Label fx:id="pendingCountLabel" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #e67e22;" text="0" />
            </children>
         </HBox>
         
         <Separator />
         
         <!-- Total Cautions -->
         <HBox alignment="CENTER_LEFT">
            <children>
               <Label style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;" text="Cautions en cours:" />
               <HBox HBox.hgrow="ALWAYS" />
               <Label fx:id="totalCautionsLabel" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #e67e22;" text="0.00 DT" />
            </children>
         </HBox>
      </children>
   </VBox>
   
   <!-- Refresh Button -->
   <VBox style="-fx-padding: 15;">
      <children>
         <Button fx:id="refreshButton" maxWidth="Infinity" onAction="#handleRefresh" 
                 prefHeight="40.0" 
                 style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-background-radius: 8; -fx-cursor: hand;"
                 text="Actualiser">
            <graphic>
               <SVGPath content="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="white" scaleX="0.9" scaleY="0.9" />
            </graphic>
         </Button>
      </children>
   </VBox>
</VBox>
